<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geospatial Market</title>
    
    <!-- PWA Settings -->
    <meta name="theme-color" content="#0f172a">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/4742/4742749.png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Rajdhani', sans-serif; background-color: #0f172a; color: #e2e8f0; background-image: radial-gradient(at 0% 0%, hsla(253,16%,7%,1) 0, transparent 50%), radial-gradient(at 50% 0%, hsla(225,39%,30%,1) 0, transparent 50%), radial-gradient(at 100% 0%, hsla(339,49%,30%,1) 0, transparent 50%); background-size: cover; background-attachment: fixed; }
        .glass-panel { background: rgba(15, 23, 42, 0.85); backdrop-filter: blur(16px); border: 1px solid rgba(148, 163, 184, 0.1); box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3); }
        .neon-text { text-shadow: 0 0 10px rgba(56, 189, 248, 0.5); }
        .tooltip { visibility: hidden; position: absolute; z-index: 50; opacity: 0; transition: opacity 0.3s; }
        .has-tooltip:hover .tooltip { visibility: visible; opacity: 1; }
        .sortable { cursor: pointer; user-select: none; }
        .sortable:hover { color: #22d3ee; }
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 3px; }
        /* Safe Area for Mobile (iPhone Notch etc) */
        .safe-area-top { padding-top: env(safe-area-inset-top); }
    </style>
</head>
<body class="min-h-screen flex flex-col safe-area-top">

    <!-- Nav -->
    <nav class="glass-panel border-b border-slate-700 sticky top-0 z-40">
        <div class="container mx-auto px-4 lg:px-6 py-3 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <i class="fa-solid fa-earth-americas text-cyan-400 text-2xl animate-pulse"></i>
                <h1 class="text-xl font-bold tracking-widest text-white uppercase neon-text">Geospatial <span class="text-slate-400 text-sm hidden sm:inline">Market</span></h1>
            </div>
            <div class="flex items-center gap-4">
                <a href="/api/export-csv" class="bg-emerald-600 hover:bg-emerald-500 text-white text-[10px] md:text-xs font-bold py-2 px-3 md:px-4 rounded border border-emerald-400 shadow-[0_0_15px_rgba(16,185,129,0.3)] transition flex items-center gap-2">
                    <i class="fa-solid fa-file-csv"></i> <span class="hidden sm:inline">DOWNLOAD REPORT</span><span class="sm:hidden">CSV</span>
                </a>
                <div class="text-xs font-mono text-cyan-400 border border-cyan-900 bg-cyan-900/20 px-3 py-1 rounded flex flex-col items-end">
                    <span id="data-source" class="text-[10px] text-slate-400">CONNECTING...</span>
                    <span class="hidden sm:inline">UPDATED: <span id="main-update-time">--:--</span></span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Content -->
    <main class="container mx-auto px-2 lg:px-4 py-6 flex-grow grid grid-cols-1 lg:grid-cols-4 gap-6">
        
        <!-- News Feed -->
        <div class="lg:col-span-1 glass-panel rounded-xl flex flex-col h-[300px] lg:h-[calc(100vh-120px)] lg:sticky lg:top-24 order-1 lg:order-1">
            <div class="p-4 border-b border-slate-700 bg-slate-800/40 flex justify-between items-center">
                <h3 class="text-md font-bold text-cyan-50 flex items-center gap-2">
                    <i class="fa-solid fa-bell text-red-400 animate-pulse"></i> Major Alerts
                </h3>
                <span class="text-[10px] text-slate-500" id="news-update-time">Upd: --</span>
            </div>
            <div id="news-feed" class="flex-grow overflow-y-auto p-4 space-y-4">
                <div class="text-center text-slate-500 text-sm mt-10"><i class="fa-solid fa-circle-notch fa-spin"></i> Uplinking...</div>
            </div>
        </div>

        <!-- Main Dashboard -->
        <div class="lg:col-span-3 space-y-6 order-2 lg:order-2">
            
            <!-- Chart Section -->
            <div class="glass-panel p-4 lg:p-6 rounded-xl">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-2">
                    <h3 class="text-lg font-bold text-cyan-50 flex items-center gap-2">
                        <i class="fa-solid fa-chart-line text-cyan-400"></i> Geospatial Sector Index
                    </h3>
                    <div class="flex gap-2">
                        <button onclick="updateMarketChart('1mo')" class="time-btn px-3 py-1 text-[10px] font-bold rounded bg-slate-800 border border-slate-600 hover:bg-cyan-900 hover:border-cyan-500 transition">1M</button>
                        <button onclick="updateMarketChart('3mo')" class="time-btn px-3 py-1 text-[10px] font-bold rounded bg-cyan-900/50 border border-cyan-500 text-cyan-300">3M</button>
                        <button onclick="updateMarketChart('6mo')" class="time-btn px-3 py-1 text-[10px] font-bold rounded bg-slate-800 border border-slate-600 hover:bg-cyan-900 hover:border-cyan-500 transition">6M</button>
                    </div>
                </div>
                <div class="relative h-48 lg:h-64 w-full"><canvas id="marketChart"></canvas></div>
            </div>

            <!-- KPIs -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-3 lg:gap-4">
                <div class="glass-panel p-3 lg:p-4 rounded-lg border-l-2 border-emerald-500">
                    <div class="text-slate-400 text-[10px] lg:text-xs uppercase">Top Stability</div>
                    <div class="text-lg lg:text-xl font-bold text-white truncate" id="best-pick">--</div>
                </div>
                <div class="glass-panel p-3 lg:p-4 rounded-lg border-l-2 border-red-500">
                    <div class="text-slate-400 text-[10px] lg:text-xs uppercase">High Leverage</div>
                    <div class="text-lg lg:text-xl font-bold text-white truncate" id="worst-pick">--</div>
                </div>
                <div class="glass-panel p-3 lg:p-4 rounded-lg border-l-2 border-blue-500">
                    <div class="text-slate-400 text-[10px] lg:text-xs uppercase">Avg Score</div>
                    <div class="text-lg lg:text-xl font-bold text-white" id="avg-score">--</div>
                </div>
                <div class="glass-panel p-3 lg:p-4 rounded-lg border-l-2 border-purple-500">
                    <div class="text-slate-400 text-[10px] lg:text-xs uppercase">Assets</div>
                    <div class="text-lg lg:text-xl font-bold text-white" id="count">--</div>
                </div>
            </div>

            <!-- Table -->
            <div class="glass-panel rounded-xl overflow-hidden min-h-[400px]">
                <div class="px-4 lg:px-6 py-3 border-b border-slate-700 bg-slate-800/40 flex justify-between items-center">
                    <h3 class="text-md font-bold text-white uppercase tracking-wider">Watchlist Assets</h3>
                    <div class="text-xs text-slate-500 hidden sm:block">Updated: <span id="table-update-time" class="text-cyan-400 font-mono">--:--</span></div>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full text-left text-sm whitespace-nowrap">
                        <thead class="bg-slate-900/80 text-slate-400 uppercase text-xs">
                            <tr>
                                <th class="px-4 lg:px-6 py-3 sortable sticky left-0 bg-slate-900 z-10" onclick="sortTable('ticker')">Ticker</th>
                                <th class="px-4 lg:px-6 py-3 sortable" onclick="sortTable('name')">Company</th>
                                <th class="px-4 lg:px-6 py-3 text-right has-tooltip cursor-help sortable" onclick="sortTable('z_score')">Z-Score
                                    <div class="tooltip bg-slate-900 border border-slate-600 p-3 rounded text-xs text-slate-300 w-56 shadow-xl -ml-20 mt-2">
                                        <strong class="text-white block mb-1">Altman Z-Score (TTM)</strong>
                                        <span class="text-red-400">< 1.8</span> Distress<br>
                                        <span class="text-yellow-400">1.8 - 3.0</span> Grey Zone<br>
                                        <span class="text-emerald-400">> 3.0</span> Safe
                                    </div>
                                </th>
                                <th class="px-4 lg:px-6 py-3 text-right has-tooltip cursor-help sortable" onclick="sortTable('fcf_yield')">FCF %
                                    <div class="tooltip bg-slate-900 border border-slate-600 p-3 rounded text-xs text-slate-300 w-56 shadow-xl -ml-20 mt-2">
                                        <strong class="text-white block mb-1">Free Cash Flow Yield</strong>
                                        <span class="text-emerald-400">Positive</span>: Self-funding<br>
                                        <span class="text-red-400">Negative</span>: Burning cash
                                    </div>
                                </th>
                                <th class="px-4 lg:px-6 py-3 text-right has-tooltip cursor-help sortable" onclick="sortTable('runway')">Runway
                                    <div class="tooltip bg-slate-900 border border-slate-600 p-3 rounded text-xs text-slate-300 w-56 shadow-xl -ml-20 mt-2">
                                        <strong class="text-white block mb-1">Cash Runway (Mo)</strong>
                                        Based on Latest Quarter Burn.<br><span class="text-red-400"> < 12 Mo</span> Critical Risk
                                    </div>
                                </th>
                                <th class="px-4 lg:px-6 py-3 text-center has-tooltip cursor-help sortable" onclick="sortTable('score')">Score
                                    <div class="tooltip bg-slate-900 border border-slate-600 p-3 rounded text-xs text-slate-300 w-56 shadow-xl -ml-36 mt-2">
                                        <strong class="text-white block mb-1">Composite Score</strong>
                                        0-100 rating based on Leverage, Liquidity, and Capital.
                                    </div>
                                </th>
                            </tr>
                        </thead>
                        <tbody id="ticker-body" class="divide-y divide-slate-700/50 text-slate-300">
                            <tr><td colspan="7" class="p-8 text-center text-slate-500"><i class="fa-solid fa-circle-notch fa-spin mr-2"></i> Initializing Uplink...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <!-- Detailed Modal -->
    <div id="detail-modal" class="fixed inset-0 bg-black/80 backdrop-blur-md z-50 hidden flex items-center justify-center p-2 lg:p-4 overflow-y-auto">
        <!-- Improved Mobile Width: w-11/12 instead of max-w-6xl fixed -->
        <div class="glass-panel w-11/12 lg:max-w-6xl rounded-2xl overflow-hidden shadow-2xl transform transition-all scale-95 opacity-0 flex flex-col max-h-[90vh] my-auto" id="modal-content">
            
            <div class="bg-slate-900/90 p-4 lg:p-6 border-b border-slate-700 flex justify-between items-start shrink-0">
                <div>
                    <h2 class="text-2xl lg:text-3xl font-bold text-white neon-text" id="m-ticker">LOADING</h2>
                    <p class="text-cyan-400 text-xs lg:text-sm tracking-widest uppercase" id="m-name">...</p>
                </div>
                <button onclick="closeModal()" class="text-slate-400 hover:text-white transition p-2"><i class="fa-solid fa-xmark text-2xl"></i></button>
            </div>

            <div class="p-4 lg:p-6 grid grid-cols-1 lg:grid-cols-3 gap-6 bg-slate-900/60 overflow-y-auto">
                <!-- Left Column -->
                <div class="col-span-1 space-y-6">
                    <div>
                        <h4 class="text-xs text-slate-500 uppercase tracking-widest mb-2">Operational Intel</h4>
                        <div class="text-sm text-slate-300 space-y-2">
                            <p><i class="fa-solid fa-users w-6 text-cyan-600"></i> <span id="m-emp">--</span> Employees</p>
                            <p><i class="fa-solid fa-location-dot w-6 text-cyan-600"></i> <span id="m-city">--</span></p>
                            <a href="#" target="_blank" id="m-web" class="text-cyan-400 hover:text-cyan-300 text-xs block border border-cyan-800 bg-cyan-900/30 p-2 text-center rounded mt-4">OFFICIAL WEBSITE &rarr;</a>
                        </div>
                    </div>
                    
                    <!-- Z-Score Transparency Box -->
                    <div class="bg-slate-800/50 p-4 rounded border border-slate-700">
                        <h4 class="text-xs text-cyan-400 uppercase tracking-widest mb-3 border-b border-slate-700 pb-1">Z-Score Data (TTM)</h4>
                        <div id="m-z-breakdown" class="space-y-1 text-xs font-mono text-slate-400">
                            <!-- JS injects here -->
                            Loading components...
                        </div>
                        <div class="mt-2 text-[10px] text-slate-500 italic">Based on Trailing 12-Months Financials</div>
                    </div>

                    <div class="text-xs text-slate-400 leading-relaxed border-t border-slate-700 pt-4 h-32 overflow-y-auto" id="m-desc">Fetching description...</div>
                </div>

                <!-- Right Column -->
                <div class="col-span-1 lg:col-span-2 space-y-6">
                    <div class="h-48 bg-slate-800/30 rounded-lg p-2 border border-slate-700">
                        <canvas id="companyChart"></canvas>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                         <div class="bg-slate-800/50 p-3 rounded border border-slate-700">
                            <h4 class="text-[10px] text-slate-500 uppercase mb-2">Recent Insider Activity</h4>
                            <div id="m-insider-list" class="space-y-1"></div>
                         </div>
                         <div class="h-32 bg-slate-800/30 rounded-lg p-2 border border-slate-700">
                             <canvas id="deChart"></canvas>
                         </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        Chart.defaults.color = '#64748b'; Chart.defaults.font.family = 'Rajdhani';
        let marketChartInstance = null, companyChartInstance = null, deChartInstance = null;
        let globalCompanyData = [], sortDirection = 1;

        async function initDashboard() {
            loadPrices(); loadNews(); updateMarketChart('3mo');
            setInterval(loadPrices, 600000); setInterval(loadNews, 3600000);
        }

        async function loadPrices() {
            try {
                const res = await fetch('/api/dashboard-data');
                const data = await res.json();
                document.getElementById('data-source').innerText = data.source === "Live API" ? "SOURCE: LIVE API" : "SOURCE: LOCAL DB";
                globalCompanyData = data.companies;
                renderTable(globalCompanyData);
                updateKPIs(globalCompanyData);
                document.getElementById('main-update-time').innerText = data.last_updated;
                document.getElementById('table-update-time').innerText = data.last_updated;
            } catch (e) { console.error(e); }
        }

        async function loadNews() {
            try {
                const res = await fetch('/api/news');
                const data = await res.json();
                const feed = document.getElementById('news-feed');
                document.getElementById('news-update-time').innerText = data.updated;
                feed.innerHTML = '';
                data.items.forEach(item => {
                    let badgeColor = "bg-slate-700 text-slate-300";
                    if(item.type === "Contract") badgeColor = "bg-emerald-900/50 text-emerald-400 border border-emerald-700/50";
                    if(item.type === "Launch") badgeColor = "bg-blue-900/50 text-blue-400 border border-blue-700/50";
                    if(item.type === "Finance") badgeColor = "bg-yellow-900/50 text-yellow-400 border border-yellow-700/50";
                    feed.innerHTML += `<div class="bg-slate-800/50 p-3 rounded border border-slate-700 hover:border-cyan-500/50 transition mb-2"><div class="flex justify-between items-start mb-2"><span class="text-[10px] font-bold px-2 py-0.5 rounded ${badgeColor}">${item.type.toUpperCase()}</span><span class="text-[10px] text-slate-500">${item.time}</span></div><a href="${item.link}" target="_blank" class="text-xs text-slate-300 hover:text-white font-medium block leading-snug mb-1">${item.title}</a><div class="flex justify-between items-center mt-2 border-t border-slate-700/50 pt-2"><span class="text-[10px] text-slate-500 font-mono">${item.related}</span><span class="text-[10px] text-slate-600 italic">${item.publisher}</span></div></div>`;
                });
            } catch(e) { console.error(e); }
        }

        async function updateMarketChart(period) {
             const res = await fetch(`/api/market-chart?period=${period}`);
             const data = await res.json();
             const ctx = document.getElementById('marketChart').getContext('2d');
             if(marketChartInstance) marketChartInstance.destroy();
             marketChartInstance = new Chart(ctx, {
                 type: 'line',
                 data: { labels: data.dates, datasets: [{ label: 'Sector', data: data.geo_index, borderColor: '#22d3ee', backgroundColor: 'rgba(34, 211, 238, 0.05)', borderWidth: 2, fill: true, pointRadius: 0 }, { label: 'S&P 500', data: data.spy_index, borderColor: '#3b82f6', borderWidth: 2, borderDash: [4, 4], pointRadius: 0 }] },
                 options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { labels: { color: '#cbd5e1' } } }, scales: { y: { grid: { color: 'rgba(51, 65, 85, 0.3)' } }, x: { display: false } } }
             });
        }

        function renderTable(companies) {
            const tbody = document.getElementById('ticker-body');
            tbody.innerHTML = '';
            companies.forEach(c => {
                let zClass = "text-slate-400";
                if(c.z_score < 1.8) zClass = "text-red-500 font-bold";
                else if(c.z_score >= 1.8 && c.z_score < 3.0) zClass = "text-yellow-500 font-bold"; // Grey Zone
                else if(c.z_score > 3.0) zClass = "text-emerald-400 font-bold";

                let fcfClass = c.fcf_yield < 0 ? "text-pink-500" : "text-emerald-400 font-bold";
                let runClass = c.runway < 12 ? "text-amber-500 font-bold" : "text-slate-400";
                let badgeClass = c.score >= 80 ? "text-emerald-400 border-emerald-500/30 bg-emerald-500/10" : (c.score <= 40 ? "text-pink-400 border-pink-500/30 bg-pink-500/10" : "text-yellow-400 border-yellow-500/30 bg-yellow-500/10");
                let status = c.score >= 80 ? "STABLE" : (c.score <= 40 ? "RISK" : "MODERATE");

                const tr = document.createElement('tr');
                tr.className = "hover:bg-slate-800/50 transition-colors cursor-pointer border-b border-slate-800/50 group";
                tr.onclick = () => openCompanyModal(c.ticker, c.name);
                tr.innerHTML = `<td class="px-4 lg:px-6 py-4 font-bold text-cyan-300 group-hover:text-white transition sticky left-0 bg-slate-900/90 sm:bg-transparent">${c.ticker}</td><td class="px-4 lg:px-6 py-4 text-slate-300 font-medium">${c.name}</td><td class="px-4 lg:px-6 py-4 text-right font-mono ${zClass}">${c.z_score}</td><td class="px-4 lg:px-6 py-4 text-right font-mono ${fcfClass}">${c.fcf_yield}%</td><td class="px-4 lg:px-6 py-4 text-right font-mono ${runClass}">${c.runway === 999 ? 'âˆž' : c.runway + ' mo'}</td><td class="px-4 lg:px-6 py-4 text-center"><span class="px-2 py-1 rounded text-[10px] font-bold border tracking-wider ${badgeClass}">${c.score}</span></td>`;
                tbody.appendChild(tr);
            });
        }

        function sortTable(key) {
            sortDirection *= -1;
            globalCompanyData.sort((a, b) => {
                let valA = a[key], valB = b[key];
                if (typeof valA === 'string') { valA = valA.toLowerCase(); valB = valB.toLowerCase(); }
                if (valA < valB) return -1 * sortDirection;
                if (valA > valB) return 1 * sortDirection;
                return 0;
            });
            renderTable(globalCompanyData);
        }

        function updateKPIs(companies) {
            if(companies.length === 0) return;
            const sorted = [...companies].sort((a,b) => b.score - a.score);
            document.getElementById('best-pick').innerText = sorted[0].ticker;
            document.getElementById('worst-pick').innerText = sorted[sorted.length-1].ticker;
            document.getElementById('count').innerText = companies.length;
            document.getElementById('avg-score').innerText = Math.round(companies.reduce((a,b)=>a+b.score, 0)/companies.length);
        }

        async function openCompanyModal(ticker, name) {
            const modal = document.getElementById('detail-modal');
            document.getElementById('m-ticker').innerText = ticker;
            document.getElementById('m-name').innerText = name;
            document.getElementById('m-z-breakdown').innerHTML = "Loading...";
            
            modal.classList.remove('hidden');
            // Small delay for transition
            setTimeout(() => { 
                document.getElementById('modal-content').classList.remove('scale-95', 'opacity-0'); 
                document.getElementById('modal-content').classList.add('scale-100', 'opacity-100'); 
            }, 10);

            try {
                const res = await fetch(`/api/company-details/${ticker}`);
                const data = await res.json();
                if(data.error) throw new Error(data.error);
                
                document.getElementById('m-desc').innerText = data.description;
                
                // Fill Z-Score Breakdown
                let zHtml = "";
                if (data.z_components && Object.keys(data.z_components).length > 0) {
                    for (const [key, val] of Object.entries(data.z_components)) {
                        zHtml += `<div class="flex justify-between"><span>${key}:</span><span class="text-emerald-400">${val}</span></div>`;
                    }
                } else { zHtml = "Detailed breakdown unavailable"; }
                document.getElementById('m-z-breakdown').innerHTML = zHtml;

                // Insiders
                const insList = document.getElementById('m-insider-list');
                insList.innerHTML = '';
                if(data.insider_trades.length === 0) insList.innerHTML = '<span class="text-xs text-slate-500">No recent trades found.</span>';
                data.insider_trades.forEach(t => {
                    insList.innerHTML += `<div class="flex justify-between text-[10px] border-b border-slate-700/50 pb-1"><span class="text-slate-400">${t.date}</span><span class="text-slate-300 truncate w-20">${t.insider}</span><span class="${t.type==='Buy'?'text-emerald-400':'text-red-400'} font-bold">${t.type} ${t.shares}</span></div>`;
                });

                // Charts
                const ctxP = document.getElementById('companyChart').getContext('2d');
                if (companyChartInstance) companyChartInstance.destroy();
                companyChartInstance = new Chart(ctxP, { type: 'line', data: { labels: data.dates, datasets: [{ label: 'Price', data: data.prices, borderColor: '#22d3ee', backgroundColor: 'rgba(34, 211, 238, 0.1)', borderWidth: 2, fill: true, pointRadius: 0 }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { display: false }, y: { grid: { color: 'rgba(51, 65, 85, 0.3)' } } } } });

                const ctxDE = document.getElementById('deChart').getContext('2d');
                if (deChartInstance) deChartInstance.destroy();
                deChartInstance = new Chart(ctxDE, { type: 'bar', data: { labels: data.de_dates, datasets: [{ label: 'D/E', data: data.de_values, backgroundColor: data.de_values.map(v => v > 2 ? 'rgba(236, 72, 153, 0.6)' : 'rgba(52, 211, 153, 0.6)'), borderWidth: 0 }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { grid: { color: 'rgba(51, 65, 85, 0.3)' }, title: {display: true, text: 'Ratio'} }, x: { display: false } } } });

            } catch (e) { document.getElementById('m-desc').innerText = "Data unavailable."; }
        }

        function closeModal() {
            const content = document.getElementById('modal-content');
            content.classList.remove('scale-100', 'opacity-100');
            content.classList.add('scale-95', 'opacity-0');
            setTimeout(() => document.getElementById('detail-modal').classList.add('hidden'), 200);
        }
        
        // Close on clicking outside
        window.onclick = function(event) { if (event.target == document.getElementById('detail-modal')) closeModal(); }
        
        initDashboard();
    </script>
</body>
</html>